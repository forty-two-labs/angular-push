angular.module("PlPush",["ngCordova"]);
!function(){"use strict";angular.module("PlPush").factory("LocalDataSrv",function(){var e=function(e){delete window.localStorage[e]},t=function(e){return localStorage.getItem(e)},o=function(e){return!!localStorage.getItem(e)},n=function(e,t){localStorage.setItem(e,t)};return{setKey:n,getKey:t,isKeySet:o,eraseKey:e}})}();
!function(){"use strict";function n(){function n(){this.getGcmSenderId=function(){return t},this.getLocalStorageKey=function(){return e}}var t=null,e="plPush.pushToken";this.setGcmSenderId=function(n){t=n},this.setLocalStorageKey=function(n){e=n},this.$get=function(){return new n}}angular.module("PlPush").provider("PushConfig",n)}();
!function(){"use strict";function e(e,o,n,r){function i(e){o.setKey(n.getLocalStorageKey(),e)}function t(){return o.getKey(n.getLocalStorageKey(),"")}function c(e){v=e}function s(o,n){return f=o,l=n,document.addEventListener("deviceready",function(){ionic.Platform.isAndroid()&&(d(),e.$on("$cordovaPush:notificationReceived",u)),ionic.Platform.isIOS()&&(a(),e.$on("$cordovaPush:notificationReceived",g))}),this}function a(){var e={badge:!0,sound:!0,alert:!0};r.register(e).then(function(e){i(e.deviceToken),void 0!==f&&f({source:"ios",token:e.deviceToken})},function(e){void 0!==l&&l(e),console.log("Registration error on IOS: ",e)})}function d(){var e={senderID:h};r.register(e).then(function(e){console.log("Registration requested!")},function(e){console.log("Error registering on Android",e)})}function u(e,o){switch(o.event){case"registered":o.regid.length>0&&(i(o.regid),void 0!==f&&f({source:"android",token:o.regid}));break;case"message":void 0!==v&&v(o);break;case"error":console.log("GCM error = "+o.msg);break;default:console.log("An unknown GCM event has occurred")}}function g(e,o){void 0!==v&&v(o)}var v,f,l,h=n.getGcmSenderId(),k={ensureRegistration:s,getToken:t,onMessage:c};return k}angular.module("PlPush").service("PushSrv",e),e.$inject=["$rootScope","LocalDataSrv","PushConfig","$cordovaPush"]}();